@startuml
skinparam classAttributeIconSize 0
skinparam roundcorner 0
skinparam linetype ortho
skinparam groupInheritance 4

class TreasureHunterGame{
-Store store;
-Player player;
-Hook hook;
-ArrayList<Treasure> treasure;
}

class Store{
+pay(Player,int)
+improveHook(Player,Hook);
+improveEngine(Player,Engine);
}

class Player{
String name;
int balance;
}

class Hook{
-Coordinate position;
-Engine engine;
-int length;
}

abstract class Movable{
-Coordinate position;
-Engine engine;
+setState(Coordinate,Engine);
}

class Coordinate{
-int x;
-int y;
}

class Engine{
-float fuel;
-int power;
}

class Treasure{
-TreasureType type;
-Coordinate position;
-int rarity;
-int weight;
}

enum TreasureType{
}

class Snapshot{
-Player playerState;
-Hook hookState;
ArrayList<Treasure> treasureState;
+saveGame();
}

abstract class Persistence{
+Player playerUpload();
+Hook hookUpload();
+ArrayList<Treasure> treasureListUpload();
}

class DirectorTreasure{
+constructTreasure(Builder,TreasureType,int);
}

class TreasureBuilder{
-TreasureType type;
-Coordinate position;
-int rarity;
-int weight;
int price;
+Treasure getResults();
}

interface Builder{
}

TreasureHunterGame *--> Store
TreasureHunterGame *--> Player
TreasureHunterGame *--> Hook
TreasureHunterGame *--> Treasure
TreasureHunterGame ..> Snapshot
TreasureHunterGame ..> DirectorTreasure
TreasureHunterGame ..> TreasureBuilder

Store ..> Player
Store ..> Hook
Store ..> Engine

Hook *--> Coordinate
Hook *--> Engine
Hook --|> Movable

Treasure ..> TreasureType
Treasure o--> Coordinate

Snapshot o--> Player
Snapshot o--> Hook
Snapshot o--> Treasure
Snapshot --|> Persistence

DirectorTreasure ..> Builder
DirectorTreasure ..> TreasureType

TreasureBuilder ..> Builder
TreasureBuilder --> Treasure

@enduml